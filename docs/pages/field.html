

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Field &mdash; PySEMTools develop documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=16816911"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PySEMTools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="datatypes.html">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation.html">Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">InputOutput (I/O)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples on data types and IO:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/1-datatypes_io.html">Data types and IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/2-sem_subdomains.html">Sem subdomains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/3-data_compression.html">Data compression</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples on calculus on SEM mesh:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/1-differentiation.html">Derivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/2-integration.html">Integration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples on interpolation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/1-interpolation_to_query_points.html">Interpolation to query points</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/2-element_interpolation.html">Element distribution interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/3-interpolation_from_2d_sem_mesh.html">Interpolation from 2D sem mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/5-structured_mesh.html">Generating structured meshes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/6-interpolating_file_sequences.html">Interpolating file sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/7-visualizing_pointclouds.html">Visualizing pointclouds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples on reduced order models:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/1-POD_from_pointclouds.html">POD from pointclouds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/2-POD_fft_from_pointclouds.html">POD and fft from pointclouds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/2-POD_fft_from_pointclouds.html#Write-out-data">Write out data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples on statistics:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/1-post_processing_mean_fields.html">Processing statistics files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/1-post_processing_mean_fields.html#Visualize-the-rotated-mean">Visualize the rotated mean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/2-UQ_of_velocity.html">UQ of velocity fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_notebooks/3-UQ_of_temperature.html">UQ of temperature fields</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PySEMTools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Field</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/field.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="field">
<h1>Field<a class="headerlink" href="#field" title="Link to this heading"></a></h1>
<p>Descriptions of the contents of the Field class, which is used to collect data to be post-processed.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pysemtools.datatypes.field.Field">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pysemtools.datatypes.field.</span></span><span class="sig-name descname"><span class="pre">Field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysemtools.datatypes.field.Field" title="Link to this definition"></a></dt>
<dd><p>Class that contains fields.</p>
<p>This is the main class used to contain data that can be used for post processing.
The data does not generarly need to be present in this class, as it is typically enough to have
the data as ndarrays of shape (nelv, lz, ly, lx) for each field. However this class
provides a easy interface to collect data tha is somehow associated.</p>
<p>It also allows to easily write data to disk. As all the data in this class will be stored in the same file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>comm</strong><span class="classifier">Comm</span></dt><dd><p>MPI comminicator object.</p>
</dd>
<dt><strong>data</strong><span class="classifier">HexaData, optional</span></dt><dd><p>HexaData object that contains the coordinates of the domain.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>fields</strong><span class="classifier">dict</span></dt><dd><p>Dictionary that contains the fields. The keys are the field names and the values are lists of ndarrays.
The keys for these dictionaries are the same as for Hexadata objects, i.e. vel, pres, temp, scal.</p>
</dd>
<dt><strong>vel_fields</strong><span class="classifier">int</span></dt><dd><p>Number of velocity fields.</p>
</dd>
<dt><strong>pres_fields</strong><span class="classifier">int</span></dt><dd><p>Number of pressure fields.</p>
</dd>
<dt><strong>temp_fields</strong><span class="classifier">int</span></dt><dd><p>Number of temperature fields.</p>
</dd>
<dt><strong>scal_fields</strong><span class="classifier">int</span></dt><dd><p>Number of scalar fields.</p>
</dd>
<dt><strong>t</strong><span class="classifier">float</span></dt><dd><p>Time of the data.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysemtools.datatypes.field.Field.update_vars" title="pysemtools.datatypes.field.Field.update_vars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_vars</span></code></a>()</p></td>
<td><p>Update number of fields.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>clear</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"></dd>
</dl>
<p class="rubric">Examples</p>
<p>If a hexadata object: data is read from disk, the field object can be created directly from it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pysemtools.datatypes.field</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>If one wishes to use the data in the fields. It is possible to reference it with a ndarray of shape (nelv, lz, ly, lx)
as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">fld</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;vel&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">fld</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;vel&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">fld</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;vel&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vel_magnitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">u</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">w</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>A field object can be created empty and then fields can be added to it. Useful to write data to disk.
if a ndarray u is created with shape (nelv, lz, ly, lx) it can be added to the field object as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pysemtools.datatypes.field</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">comm</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;vel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="o">.</span><span class="n">update_vars</span><span class="p">()</span>
</pre></div>
</div>
<p>This fld object can then be used to write fld files from field u created in the code.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pysemtools.datatypes.field.Field.update_vars">
<span class="sig-name descname"><span class="pre">update_vars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pysemtools.datatypes.field.Field.update_vars" title="Link to this definition"></a></dt>
<dd><p>Update number of fields.</p>
<p>Update the number of fields in the class in the event that
it has been modified. This is needed for writing data properly if more arrays are added to the class.</p>
<p class="rubric">Examples</p>
<p>A field object can be created empty and then fields can be added to it. Useful to write data to disk.
if a ndarray u is created with shape (nelv, lz, ly, lx) it can be added to the field object as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pysemtools.datatypes.field</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">comm</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s2">&quot;vel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="o">.</span><span class="n">update_vars</span><span class="p">()</span>
</pre></div>
</div>
<p>This fld object can then be used to write fld files from field u created in the code.</p>
</dd></dl>

</dd></dl>

</section>
<section id="fieldregistry">
<h1>FieldRegistry<a class="headerlink" href="#fieldregistry" title="Link to this heading"></a></h1>
<p>Descriptions of the contents of the FieldRegistry class, which extends the Field class and is used to collect data to be post-processed.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pysemtools.datatypes.field.FieldRegistry">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pysemtools.datatypes.field.</span></span><span class="sig-name descname"><span class="pre">FieldRegistry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bckend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'numpy'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysemtools.datatypes.field.FieldRegistry" title="Link to this definition"></a></dt>
<dd><p>Class that contains fields.</p>
<p>This class extends the main field class, as it contains a registry that allows to easily reference the fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>comm</strong><span class="classifier">Comm</span></dt><dd><p>MPI comminicator object.</p>
</dd>
<dt><strong>data</strong><span class="classifier">HexaData, optional</span></dt><dd><p>HexaData object that contains the coordinates of the domain.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysemtools.datatypes.field.FieldRegistry.add_field" title="pysemtools.datatypes.field.FieldRegistry.add_field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_field</span></code></a>(comm[, field_name, field, ...])</p></td>
<td><p>Add fields to the registry.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysemtools.datatypes.field.FieldRegistry.clear" title="pysemtools.datatypes.field.FieldRegistry.clear"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear</span></code></a>()</p></td>
<td><p>Clear the registry and the fields.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pysemtools.datatypes.field.FieldRegistry.rename_registry_key" title="pysemtools.datatypes.field.FieldRegistry.rename_registry_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rename_registry_key</span></code></a>([old_key, new_key])</p></td>
<td><p>Rename a key in the registry.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pysemtools.datatypes.field.FieldRegistry.update_vars" title="pysemtools.datatypes.field.FieldRegistry.update_vars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_vars</span></code></a>()</p></td>
<td><p>Update the registry with the fields that are present in the fields dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="pysemtools.datatypes.field.FieldRegistry.add_field">
<span class="sig-name descname"><span class="pre">add_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_name=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_key=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float64'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysemtools.datatypes.field.FieldRegistry.add_field" title="Link to this definition"></a></dt>
<dd><p>Add fields to the registry. They will be stored in the fields dictionary to easily write them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>comm</strong><span class="classifier">Comm</span></dt><dd><p>MPI comminicator object.</p>
</dd>
<dt><strong>field_name</strong><span class="classifier">str</span></dt><dd><p>Name of the field to be added. where the field is added thepends on the name</p>
</dd>
<dt><strong>field</strong><span class="classifier">ndarray</span></dt><dd><p>Field to be added to the registry. If this is provided, it is assumed to be a ndarray.
It will then be added to the registry.</p>
</dd>
<dt><strong>file_type</strong><span class="classifier">str</span></dt><dd><p>Type of the file to be added. If this is provided, it is assumed to be a file.
Currently, only “fld” supported.</p>
</dd>
<dt><strong>file_name</strong><span class="classifier">str</span></dt><dd><p>File name of the field to be added. If this is provided, it is assumed to be a file.
It will then be added to the registry.</p>
</dd>
<dt><strong>file_key</strong><span class="classifier">str</span></dt><dd><p>File key. This will be search in the file.
For nek file, the key have the following format:
“vel_0”, “vel_1”, “pres”, “temp”, “scal_0”, “scal_1”, etc.
Only for “vel” we read the 2/3 components at the same time</p>
</dd>
<dt><strong>dtype</strong><span class="classifier">np.dtype</span></dt><dd><p>Data type of the field. Default is np.double.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysemtools.datatypes.field.FieldRegistry.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pysemtools.datatypes.field.FieldRegistry.clear" title="Link to this definition"></a></dt>
<dd><p>Clear the registry and the fields.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysemtools.datatypes.field.FieldRegistry.rename_registry_key">
<span class="sig-name descname"><span class="pre">rename_registry_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysemtools.datatypes.field.FieldRegistry.rename_registry_key" title="Link to this definition"></a></dt>
<dd><p>Rename a key in the registry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>old_key</strong><span class="classifier">str</span></dt><dd><p>Old key to be renamed.</p>
</dd>
<dt><strong>new_key</strong><span class="classifier">str</span></dt><dd><p>New key to be used.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If you update the registry, some keys might be overwritten or multiple keys might reference the same data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysemtools.datatypes.field.FieldRegistry.update_vars">
<span class="sig-name descname"><span class="pre">update_vars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pysemtools.datatypes.field.FieldRegistry.update_vars" title="Link to this definition"></a></dt>
<dd><p>Update the registry with the fields that are present in the fields dictionary.</p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Neko authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>